# QTAnalysis
策略代码+回测详情
![小市值策略](https://github.com/user-attachments/assets/0589dcd1-0544-4b26-b393-d99fcd307714)
![双均线策略](https://github.com/user-attachments/assets/2cbf2cde-055e-48ad-8f4e-cfe4d39990b5)
3 
均值回归-动量突破混合策略
策略逻辑
均值回归部分：

假设价格在短期内会围绕其均值波动。

当价格偏离均值一定范围时，开仓等待价格回归。

动量突破部分：

假设价格在突破一定范围后会延续趋势。

当价格突破阈值时，开仓跟随趋势。

通过结合这两种逻辑，策略可以在震荡市场中捕捉均值回归的机会，同时在趋势市场中捕捉动量突破的机会。

策略步骤
1. 数据准备
选择标的资产（如股票、期货）。

获取历史价格数据（如日线或分钟线）。

计算移动平均线（MA）和标准差（Std）。

2. 指标计算
均值回归信号：

计算短期移动平均线（如5日均线）和长期移动平均线（如20日均线）。

计算价格与短期均线的偏离程度：
Z-score
=
价格
−
短期MA
标准差
Z-score= 
标准差
价格−短期MA
​
 。

设置阈值（如Z-score > 2为超买，Z-score < -2为超卖）。

动量突破信号：

计算价格的波动范围（如ATR或布林带宽度）。

设置突破阈值（如价格突破上轨或下轨）。

3. 交易规则
开仓条件：

均值回归开仓：

当Z-score > 2时，认为价格超买，开空单。

当Z-score < -2时，认为价格超卖，开多单。

动量突破开仓：

当价格突破上轨时，开多单。

当价格突破下轨时，开空单。

平仓条件：

均值回归平仓：

当Z-score回归到0附近时，平仓。

动量突破平仓：

当价格回撤到移动平均线附近时，平仓。

止损止盈：

设置固定止损（如2%的损失）和止盈（如5%的收益）。

或使用动态止损（如ATR止损）。

4. 风险管理
仓位管理：

使用凯利公式或固定比例（如每次开仓不超过总资金的2%）。

分散投资：

在多个标的资产上同时运行策略，分散风险。

5. 回测与优化
回测：

使用历史数据测试策略表现，计算收益率、最大回撤、夏普比率等指标。

参数优化：

优化移动平均线周期、Z-score阈值、突破阈值等参数。

样本外测试：

使用未参与优化的数据进行验证，确保策略的稳健性。

6. 实盘部署
交易成本：

考虑手续费、滑点等实际交易成本。

执行算法：

使用智能算法（如TWAP、VWAP）减少交易对市场的影响。

监控与调整：

实时监控策略表现，根据市场变化调整参数或逻辑。
